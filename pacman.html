<html>
<canvas id="canvas" width="1200" height="900"></canvas>
<script src="character.js"></script>
<script>
// Variables - define here
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
var fps = 60; // update rate
var ctx;
var cvs;
var left = up = right = down = false; // decide if player is moving

// Player
var pacman; // initialise for later
var pacmanRadius = 10;
var playerSpeed = 2;

// Basics - useful functions
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
function rectangle(x, y, w, h, colour){ // draw rect
    ctx.fillStyle = colour;
    ctx.fillRect(x, y, w, h);
}
function keyDownHandler(event) {
	kId = event.which || event.keyPressed; // key Id
   	switch(kId) {
    	case 37:
    		left = true;
    		break;
		case 38:
	    	up = true;
	    	break;
    	case 39:
		    right = true;
	    	break;
	    case 40:
    		down = true;
	    	break;
	}
}
function keyUpHandler(event) {
	kId = event.which || event.keyPressed; // key Id
	
	switch(kId) {
		case 37:
			left = false;
			break;
		case 38:
			up = false;
			break;
		case 39:
			right = false;
			break;
		case 40:
			down = false;
			break;
	}
}
// Main - everything else 
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    window.onload=function(){
        cvs = document.getElementById('canvas');
        ctx = cvs.getContext('2d');

		document.addEventListener("keydown", keyDownHandler, false);
		document.addEventListener("keyup", keyUpHandler, false);
		
        pacman = new Character(0 , 0, 10); // x, y, hp characters stats

        setInterval(function(){
            rectangle(0, 0, canvas.width, canvas.height, 'black'); // background
            drawPlayer();
            movePlayer();
        }, 1000/fps); // refresh for fps
    }
	
	function movePlayer(){
        pPos = pacman.pos;

        switch(true){
            case right:
                pPos.x += playerSpeed;
                break;
            case left:
                pPos.x -= playerSpeed;
                break;
            case up:
                pPos.y -= playerSpeed;
                break;
            case down:
                pPos.y += playerSpeed;
        }
    } 
	
    function drawPlayer(){
        pPos = pacman.pos
        ctx.fillStyle = 'yellow';
        ctx.beginPath();
        ctx.arc(pPos.x, pPos.y, pacmanRadius, 0, Math.PI*2, true);
        ctx.fill();
    }

</script>
</html>